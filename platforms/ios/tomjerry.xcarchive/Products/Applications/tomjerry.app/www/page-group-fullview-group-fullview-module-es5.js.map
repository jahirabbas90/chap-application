{"version":3,"sources":["webpack:///src/app/page/group-fullview/group-fullview.module.ts","webpack:///src/app/page/group-fullview/group-fullview-routing.module.ts","webpack:///src/app/services/data.service.ts","webpack:///src/app/page/group-fullview/group-fullview.page.ts","webpack:///src/app/page/group-fullview/group-fullview.page.html","webpack:///src/app/page/group-fullview/group-fullview.page.scss"],"names":["GroupFullviewPageModule","imports","declarations","routes","path","component","GroupFullviewPageRoutingModule","forChild","exports","DataService","_firestore","toastCtrl","router","authUser","authUser$","asObservable","allChatRecords","allChatRecords$","perticularChatDetails","perticularChatDetails$","perticularChatMessages","perticularChatMessages$","allUsers","allUsers$","_username","_password","collection","ref","where","valueChanges","idField","subscribe","data","u","length","next","getChats","getAllUsers","showSuccess","id","usersUpdate","doc","update","then","error","val","company","email","img_url","name","password","salt","user_id","username","state","available","online","logs","last_login","Date","getTime","last_password_reset","timestamp","docRef","add","console","auth","group_name","user","members","group","last_text","users","toString","rec","deleted","unread_count","user_name","Promise","resolve","reject","res","setChatMembers","err","orderBy","chatInfo","snapshotChanges","pipe","actions","map","a","payload","docRefNew","action","msg","from","text","key","property","docRefN","type","create","message","duration","position","toast","present","providedIn","GroupFullviewPage","route","modalController","_data","_authUser","navigate","index","all_user","findIndex","x","checked","selected","indexOf","splice","push","dismiss","trim","m","log","closeModal","addGroupChat","selector","template"],"mappings":"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","file":"page-group-fullview-group-fullview-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GroupFullviewPageRoutingModule } from './group-fullview-routing.module';\n\nimport { GroupFullviewPage } from './group-fullview.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    GroupFullviewPageRoutingModule\n  ],\n  declarations: [GroupFullviewPage]\n})\nexport class GroupFullviewPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { GroupFullviewPage } from './group-fullview.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GroupFullviewPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class GroupFullviewPageRoutingModule {}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore, AngularFirestoreDocument, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport { Observable, throwError, BehaviorSubject } from 'rxjs';\nimport { catchError, retry, map } from 'rxjs/operators';\nimport { ToastController } from '@ionic/angular';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataService {\n\n  private authUser = new BehaviorSubject<any>(null);\n  public authUser$ = this.authUser.asObservable();\n\n  private allChatRecords = new BehaviorSubject<any>(null);\n  public allChatRecords$ = this.allChatRecords.asObservable();\n\n  private perticularChatDetails = new BehaviorSubject<any>(null);\n  public perticularChatDetails$ = this.perticularChatDetails.asObservable();\n  chatInfo: any;\n\n  private perticularChatMessages = new BehaviorSubject<any>(null);\n  public perticularChatMessages$ = this.perticularChatMessages.asObservable();\n  MsgInfo: any;\n\n  private allUsers = new BehaviorSubject<any>(null);\n  public allUsers$ = this.allUsers.asObservable();\n\n  // private newlyCreatedChatId = new BehaviorSubject<any>(null);\n  // public newlyCreatedChatId$ = this.newlyCreatedChatId.asObservable();\n\n  public exsistChat: any;\n\n  constructor(private _firestore: AngularFirestore, private toastCtrl: ToastController, private router:Router) { \n  }\n\n  login(_username: any, _password: any) {\n\n    this._firestore.collection('users', ref => ref.where('email', '==', _username).where('password', '==', _password))\n    .valueChanges({ idField: 'id' }).subscribe( data => {\n      var u: any = data;\n      //console.log(data);\n      if(data && data.length) {\n        this.authUser.next(u[0]);\n        this.getChats(u[0]);\n        this.getAllUsers(u[0]);\n      }\n      else{\n        this.showSuccess('error', 'Usernam or password mismatch');\n        this.authUser.next(null);\n      }\n    }); \n  }\n\n  setUserOnline(id: any) {\n\n    var usersUpdate = {};\n    usersUpdate[`state.online`] = true;\n    this._firestore.collection('users').doc(id).update(usersUpdate)\n    .then(() => {\n        //console.log(\"Document successfully updated!\");\n    })\n    .catch((error) => {\n        // The document probably doesn't exist.\n        //console.error(\"Error updating document: \", error);\n    });\n    \n  }\n\n  // updateOnDisconnect() {\n  //   return this.afAuth.authState.pipe(\n  //     tap(user => {\n  //       if (user) {\n  //         this.db.object(`status/${user.uid}`).query.ref.onDisconnect()\n  //           .update({\n  //             status: 'offline',\n  //             timestamp: this.timestamp\n  //         });\n  //       }\n  //     })\n  //   );\n  // }\n\n   \n  public addNewUser(){ \n   \n      var val = {\n        company: \"webmaddy\",\n        email: \"jahir@webmaddy.com\",\n        img_url: \"https://via.placeholder.com/150\",\n        name: \"\",\n        password: \"123456\",\n        salt: \"hashing code\",\n        user_id: \"2\",\n        username: \"jahir\",\n        state: {\n          available: true,\n          online: true\n        },\n        logs: {\n          last_login: new Date().getTime(),\n          last_password_reset: new Date().getTime()\n        },\n        timestamp: new Date().getTime()\n      };\n      //console.log(val);\n      const docRef = this._firestore.collection('users')\n      docRef.add(val).then(() => {\n        this.showSuccess('success', 'User added');\n      })\n      .catch((error) => {\n          console.error(\"Error writing document: \", error);\n          this.showSuccess('error', 'Something went wrong!');\n      });\n    \n  }\n  \n  public addGroupChat(auth, group_name, user, members){ \n    if(auth) {\n    \n      var val = {\n        group: true,\n        group_name: group_name,\n        last_text: \"\",\n        users: user,\n        members: members,\n        timestamp: new Date().getTime()\n      };\n      //console.log(val);\n      const docRef = this._firestore.collection('chat_rooms')\n      docRef.add(val).then((docRef) => {\n        // console.log(docRef.id);\n        \n      })\n      .catch((error) => {\n          // console.error(\"Error writing document: \", error);\n          this.showSuccess('error', 'Something went wrong!');\n      });\n    }\n  }  \n\n  public getChats(auth){ \n    if(auth) {\n      this._firestore.collection<any>('chat_rooms', ref => ref.where('users', 'array-contains', auth.user_id.toString())).valueChanges({ idField: 'id' })\n      // .pipe(\n      //   map(actions => actions.map(a =>{\n      //     const data = a.payload.doc.data();\n      //     const id = a.payload.doc.id;\n      //     return { id, data };\n      //   }))\n      // )\n      .subscribe(data => {\n        // console.log(data);\n        this.allChatRecords.next(data); \n      });\n    }   \n  }\n\n  public getAllUsers(auth){ \n    if(auth) { \n      // console.log( auth.user_id);   \n      this._firestore.collection<any>('users', ref => ref.where('user_id', '!=', auth.user_id.toString())).valueChanges({ idField: 'id' })\n      // .pipe(\n      //   map(actions => actions.map(a =>{\n      //     const data = a.payload.doc.data();\n      //     const id = a.payload.doc.id;\n      //     return { id, data };\n      //   }))\n      // )\n      .subscribe(data => {\n        //console.log(data);\n        this.allUsers.next(data); \n      });\n    }\n  }\n\n  public startChat(auth, rec){ \n    if(auth) {\n      var user = [auth.user_id,rec.user_id];\n      var members = [\n        {\n          deleted: false,\n          unread_count: 0,\n          user_id : auth.user_id,\n          user_name: auth.username\n        },\n        {\n          deleted: false,\n          unread_count: 0,\n          user_id : rec.user_id,\n          user_name: rec.username\n        }\n      ];\n      var val = {\n        group: false,\n        group_name: \"\",\n        last_text: \"\",\n        users: user,\n        members: members,\n        timestamp: new Date().getTime()\n      };\n\n\n      // this._firestore.collection<any>('chat_rooms', ref => ref.where('users', '==', user)).snapshotChanges()\n      // .pipe(\n      //   map(actions => actions.map(a =>{\n      //     const data = a.payload.doc.data();\n      //     const id = a.payload.doc.id;\n      //     return { id, data };\n      //   }))\n      // ).subscribe(data => {\n      //   if(data.length) {\n      //     console.log('existing data');\n      //     console.log(data);\n      //     // this.router.navigate(['/chat', data[0].id]);\n      //   } \n      //   else {\n      //     const docRef = this._firestore.collection('chat_rooms')\n      //     docRef.add(val).then((docRef) => {\n      //       console.log('new data');\n      //       console.log(docRef);\n      //       // this.getParticularChatDetail(docRef.id);\n      //       //this.router.navigate(['/chat', docRef.id]);\n      //       // this.newlyCreatedChatId.next(docRef.id);\n      //     })\n      //     .catch((error) => {\n      //         // console.error(\"Error writing document: \", error);\n      //         this.showSuccess('error', 'Something went wrong!');\n      //     });\n      //   }\n      // });\n      // return;\n\n      const docRef = this._firestore.collection('chat_rooms')\n      return new Promise<any>((resolve, reject) =>{\n        docRef.add(val).then(res => {\n          \n          this.setChatMembers(res.id, members);\n          \n\n        }, err => reject(err));\n      });  \n      \n    }\n  }  \n\n  public setChatMembers(id, members) {\n    this._firestore.collection('chat_rooms/'+id+'/membercol').add({members});\n  }\n  \n  public getParticularChats(auth, id){ \n    if(auth) {\n      const docRef = this._firestore.collection('chat_rooms').doc(id).collection('messages', ref => ref\n      //.limit(5)\n      .orderBy('timestamp', 'asc'))\n      this.chatInfo = docRef.snapshotChanges().pipe(\n        map(actions => actions.map(a =>{\n          const data = a.payload.doc.data();\n          const id = a.payload.doc.id;\n          return { id, data };\n        }))\n      ).subscribe(data => {\n        //console.log(data);\n        this.perticularChatMessages.next(data);\n      });\n\n      const docRefNew = this._firestore.collection('chat_rooms').doc(id);\n      docRefNew.snapshotChanges()\n      .pipe(\n          map(action => {\n              const data = action.payload.data();\n              const id = action.payload.id;\n              return { id, data };\n          })\n      ).subscribe(data => {\n        // console.log(data);\n        this.perticularChatDetails.next(data);\n      });\n\n    }\n  }\n  \n  public addChatMsg(auth, msg, id){  \n    if(auth) {\n\n      var val = {\n        from: auth.user_id,\n        user_name: auth.username,\n        text: msg,\n        timestamp: new Date().getTime()\n      };\n      // console.log(id);\n      // return ;\n      const docRef = this._firestore.collection('chat_rooms').doc(id).collection('messages')\n      docRef.add(val).then(() => {\n\n        this._firestore.collection('chat_rooms').doc(id).update({\n          last_text: msg\n        })\n        .then(() => {\n            //console.log(\"Document successfully updated!\");\n\n        })\n        .catch((error) => {\n            // The document probably doesn't exist.\n            //console.error(\"Error updating document: \", error);\n        });\n\n      })\n      .catch((error) => {\n          //console.error(\"Error writing document: \", error);\n          this.showSuccess('error', 'Something went wrong!');\n      });\n      //console.log(id);\n      // return;\n      \n\n\n    }\n  }\n  \n  public updateChatMembersData(auth, id, members){ \n    if(auth) {\n      const key = `members`\n      const property = members;\n\n      const docRefN = this._firestore.collection('chat_rooms').doc(id)\n      docRefN.update({\n        [key]: property\n      }).then(() => {\n\n      })\n      .catch((error) => {\n        // The document probably doesn't exist.\n        //console.error(\"Error updating document: \", error);\n      });\n      \n    }\n  }\n\n  async showSuccess(type, msg) {\n    let toast = await this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'bottom'\n    });  \n    toast.present();\n  } \n  \n\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { DataService } from '../../services/data.service';\nimport { AngularFirestore, } from '@angular/fire/firestore';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-group-fullview',\n  templateUrl: './group-fullview.page.html',\n  styleUrls: ['./group-fullview.page.scss'],\n})\nexport class GroupFullviewPage implements OnInit {\n\n  @Input() selected: any;\n  @Input() all_user: any;\n  group_name: any;\n  _authUser: any;\n\n  constructor(\n    private _firestore: AngularFirestore,\n    private router:Router,\n    private route: ActivatedRoute,\n    public modalController: ModalController,\n    private _data: DataService\n  ) {\n    _data.authUser$.subscribe(data => {\n      this._authUser = data;\n      if(this._authUser != null) {\n        \n      }\n      else {\n        this.router.navigate(['/login']);\n      }\n      //console.log(this._authUser);\n    })\n  }\n  \n  ngOnInit() {\n    //console.log(this.selected);\n    //console.log(this.all_user);\n  }\n  \n  // createGroup() {\n  //   this.router.navigate(['/all-chat']);\n  \n  // }\n\n  updateSelected(id, type) {\n    if(type == 'userName') {\n      var index = this.all_user.findIndex(x => x.data.username == id);\n      if(index > -1) {\n        if(this.all_user[index].data.checked) {\n          this.all_user[index].data.checked = false;\n          var index = this.selected.indexOf(this.all_user[index].data.username);\n          if (index !== -1) {\n            this.selected.splice(index, 1);\n          }\n        }\n        else {\n          this.all_user[index].data.checked = true;\n          this.selected.push(this.all_user[index].data.username);\n        }\n      }\n    }\n  }\n\n  async closeModal() {\n    let data = { selected: this.selected, all_user: this.all_user  };\n    await this.modalController.dismiss(data);\n  }\n\n  createGroup() {\n    if(this.group_name && this.group_name.trim() && this.selected && this.selected.length) {\n\n      var user = [this._authUser.user_id];\n      var members = [\n        {\n          deleted: false,\n          unread_count: 0,\n          user_id : this._authUser.user_id,\n          user_name: this._authUser.username\n        }\n      ];\n      for (let index = 0; index < this.all_user.length; index++) {\n        if(this.all_user[index].data.checked) {\n          user.push(this.all_user[index].data.user_id);\n          var m = {\n            deleted: false,\n            unread_count: 0,\n            user_id : this.all_user[index].data.user_id,\n            user_name: this.all_user[index].data.username\n          };\n          members.push(m);\n        }      \n      }\n      console.log(user);\n      this._firestore.collection<any>('chat_rooms', ref => ref.where('users', '==', user)).snapshotChanges()\n      .pipe(\n        map(actions => actions.map(a =>{\n          const data = a.payload.doc.data();\n          const id = a.payload.doc.id;\n          return { id, data };\n        }))\n      ).subscribe(data => {\n        if(data.length) {\n          this._data.showSuccess('error', 'Same group already exsist');\n          this.closeModal();\n        } \n        else {\n          this._data.addGroupChat(this._authUser, this.group_name, user, members);\n          this.closeModal();\n        }\n      }); \n         \n    }\n    else {\n      this._data.showSuccess('error', 'Something went wrong');\n    }\n    \n\n  }\n\n}\n","export default \"<ion-header [translucent]=\\\"true\\\" class=\\\"ion-no-border\\\">\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>    \\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button (click)=\\\"closeModal()\\\">\\n        Back\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Add New Group\\n    </ion-title>\\n  </ion-toolbar>\\n  \\n</ion-header>\\n\\n<ion-router-outlet id=\\\"main\\\"></ion-router-outlet>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <form class=\\\"body-spacing\\\">\\n    <ion-item class=\\\"form-control ion-no-padding\\\">\\n      <ion-label position=\\\"floating\\\">Group Name</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"group_name\\\" name=\\\"group_name\\\"></ion-input>\\n    </ion-item>\\n  </form>\\n  <div class=\\\"body-spacing\\\">\\n    <ion-chip class=\\\"list-spacing\\\" *ngFor=\\\"let u of selected;\\\">\\n      <ion-label>{{u}}</ion-label>\\n      <ion-icon name=\\\"close-circle\\\" (click)=\\\"updateSelected(u, 'userName')\\\"></ion-icon>\\n    </ion-chip>\\n    \\n  </div>\\n  <ion-button expand=\\\"block\\\" color=\\\"primary\\\" class=\\\"mb15\\\" mode=\\\"md\\\" (click)=\\\"createGroup()\\\">Create Group</ion-button>\\n</ion-content>\\n\";","export default \".body-spacing {\\n  padding: 0 1em;\\n}\\n.body-spacing .list-spacing {\\n  margin-left: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2dyb3VwLWZ1bGx2aWV3LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQUE7QUFDRjtBQUFFO0VBQ0ksY0FBQTtBQUVOIiwiZmlsZSI6Imdyb3VwLWZ1bGx2aWV3LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ib2R5LXNwYWNpbmd7XHJcbiAgcGFkZGluZzogMCAxZW07XHJcbiAgLmxpc3Qtc3BhY2luZ3tcclxuICAgICAgbWFyZ2luLWxlZnQ6MCA7XHJcbiAgfVxyXG59Il19 */\";"]}