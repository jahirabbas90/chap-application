{"version":3,"sources":["webpack:///src/app/page/en-all-rooms/en-all-rooms.page.scss","webpack:///src/app/page/en-all-rooms/en-all-rooms.page.ts","webpack:///src/app/page/en-all-rooms/en-all-rooms.page.html"],"names":["EnAllRoomsPage","router","_connecter","alertCtrl","firestore","platform","_location","_allUsr","_visibleUsr","chatIdArray","coversationList","message_count","bleep","Audio","src","play","authUser$","subscribe","data","_authUsr","_userNickName","name","_userid","id","Object","keys","length","navigate","fcm_token","console","warn","updateUserFcmToken","localStorage","getItem","getAllPosts","_allRoom","_filteredRoom","filter","eachVal","opt","visible_name","some","uid","undefined","_visibleNameArray","index","visibleArray","push","element","unread","collection","ref","orderBy","valueChanges","idField","removeAuth","evt","searchTerm","srcElement","value","log","toLowerCase","indexOf","event","setTimeout","target","complete","array","userListBackup","allGroups","groupName","groupFriends","create","cssClass","header","message","alert","present","ready","then","backButton","subscribeWithPriority","processNextHandler","isCurrentPathEqualTo","showExitConfirm","back","getTop","r","navigator","exitApp","e","backdropDismiss","buttons","text","role","handler","selector","template","StarPipe","_sanitizer","group","title","arr","filteredArray","itm","NotificationPipe"],"mappings":"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","file":"default~page-en-all-rooms-en-all-rooms-module~page-single-user-chat-single-user-chat-module-es5.js","sourcesContent":["export default \"ion-list {\\n  padding: 0;\\n}\\n\\nion-badge {\\n  border-radius: 10px;\\n}\\n\\nion-toolbar {\\n  border-bottom-width: 0;\\n}\\n\\nion-button[shape=circle] {\\n  --border-radius: 50%;\\n  width: 20px;\\n  height: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2VuLWFsbC1yb29tcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxVQUFBO0FBQ0Y7O0FBQ0E7RUFDRSxtQkFBQTtBQUVGOztBQUFBO0VBQ0Usc0JBQUE7QUFHRjs7QUFBQTtFQUNFLG9CQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUFHRiIsImZpbGUiOiJlbi1hbGwtcm9vbXMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWxpc3Qge1xyXG4gIHBhZGRpbmc6IDA7XHJcbn1cclxuaW9uLWJhZGdlIHtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG59XHJcbmlvbi10b29sYmFyIHtcclxuICBib3JkZXItYm90dG9tLXdpZHRoOiAwO1xyXG59XHJcblxyXG5pb24tYnV0dG9uW3NoYXBlPWNpcmNsZV0ge1xyXG4gIC0tYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIHdpZHRoOiAyMHB4O1xyXG4gIGhlaWdodDogMjBweDtcclxufVxyXG4iXX0= */\";","import { AfterViewInit, Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { MyConnecterService } from '../../services/my-connecter.service';\nimport { Platform, AlertController } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-en-all-rooms',\n  templateUrl: './en-all-rooms.page.html',\n  styleUrls: ['./en-all-rooms.page.scss'],\n})\nexport class EnAllRoomsPage implements OnInit {\n\n  _authUsr: any;\n  _allRoom: any;\n  _filteredRoom:any;\n  _userNickName:any;\n  _userid:any;\n  allChatUser:any;\n  userListBackup :any;\n  allGroups:any;\n  _allUsr = [];\n  _visibleNameArray :any;\n  _visibleUsr = [];\n  groupsListBackup:any;\n  chatIdArray=[];\n  coversationList=[];\n  message_count: number=0;\n\n  constructor(private router: Router,\n    private _connecter: MyConnecterService,\n    private alertCtrl: AlertController,\n    private firestore:AngularFirestore,\n    private platform:Platform,\n    private _location: Location) {\n\n      var bleep = new Audio();\n        bleep.src = './assets/chatTone.mp3';\n        bleep.play();\n      /* this.platform.backButton.subscribeWithPriority(9999, () => {\n        this.initializeApp();\n      }); */\n\n    _connecter.authUser$.subscribe(data => {\n      this._authUsr = data;\n      this._userNickName=this._authUsr.name;\n      this._userid=this._authUsr.id;\n      //check if user FCMToken register on not\n\n      if(Object.keys(this._authUsr).length === 0) {\n        this.router.navigate(['/en-login']);\n      }\n      else{\n        // this.getAllChat();\n      }\n    });\n\n    if (this._authUsr.fcm_token == null) {\n      console.warn(\"null\")\n      console.warn(\"\"+this._authUsr.fcm_token)\n      this._connecter.updateUserFcmToken(localStorage.getItem(\"user_id\"),\"\"+localStorage.getItem(\"user_fcm_token\"));\n    } else if (this._authUsr.fcm_token!=null && this._authUsr.fcm_token!=localStorage.getItem(\"user_fcm_token\")) {\n      console.warn(\"not_null\")\n      this._connecter.updateUserFcmToken(localStorage.getItem(\"user_id\"),localStorage.getItem(\"user_fcm_token\"));\n    }\n\n  }\n\n  ngOnInit() {\n\n    this.getAllPosts().subscribe((data) => {\n      if (data.length>0) { \n        // console.log(data);\n\n        this._allRoom=data;\n        this._filteredRoom = data.filter(eachVal => {\n          let opt = eachVal.visible_name.some((\n            { uid }) => uid == this._authUsr.id);\n          return opt;\n        })\n\n        // console.warn(\"myData :\" + JSON.stringify(this._filteredRoom))\n        this._allRoom=this._filteredRoom;\n\n        if (this._allRoom!=undefined) {\n          this._visibleNameArray=[];\n\n          for (let index = 0; index < this._allRoom.length; index++) {\n            const visibleArray = this._allRoom[index].visible_name;\n            this._visibleNameArray.push(visibleArray);\n          }\n          // console.warn(\"visibleName  :\" + JSON.stringify(this._visibleNameArray))\n\n           for (let index = 0; index < this._visibleNameArray.length; index++) {\n              const element = this._visibleNameArray[index];\n              if (element.uid===this._userid) {\n                this.message_count=element.unread;\n              }\n            }\n        }\n        \n        \n        // this.coversationList=data;\n        /* for (let index = 0; index < data.length; index++) {\n          this.coversationList.push(data[index]['visible_name']);\n        } */\n\n        /* for (let index = 0; index < this.coversationList.length; index++) {\n          const element = this.coversationList[index];\n          console.log(\"visible_user_array_index :\" + JSON.stringify(element));              \n        } */\n\n        /* console.log(\"userId :\" + this._authUsr.id);\n        console.log(this.coversationList);\n        for (let index = 0; index < this.coversationList.length; index++) {\n          const element1 = this.coversationList[index];\n          console.log(\"visible_user_array :\" + JSON.stringify(element1));\n          console.log(\"userId :\" + this._authUsr.id);\n        } */\n      }\n    });\n\n    \n   \n  }\n\n\n  /* getAllChat() {    \n    this._allRoom = this._connecter.getGroups(this._authUsr.id);\n  } */\n\n  getAllPosts(): Observable<any> {\n    return this.firestore.collection<any>(\"conversations\", ref => ref\n      .orderBy('ceatedAt', 'desc')).valueChanges({ idField: 'id' });\n  }\n  \n  signOut() {\n    this._connecter.removeAuth();\n  }\n\n  async filterList(evt) {\n    const searchTerm = evt.srcElement.value;\n    // console.log(this._allRoom)\n    console.log(searchTerm)\n\n    if (!searchTerm) {\n      this._filteredRoom=this._allRoom;\n      return;\n    }\n\n    this._filteredRoom = this._allRoom.filter(eachVal => {\n      let opt = eachVal.visible_name.some((\n        { name }) => name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n      return opt;\n    })\n    /* this.userListBackup = this.allGroups.filter(item => {\n      return item.name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1\n    }); */\n\n  }\n\n  doRefresh(event) {\n    console.log('Begin async operation');\n    // this.getAllChat();\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      event.target.complete();\n    }, 2000);\n  }\n\n  getAllUser(value, array) {\n    for (let index = 0; index < array.length; index++) {\n      this.userListBackup = this.userListBackup.push(value)\n\n    }\n\n    this.allGroups = this.userListBackup;\n  }\n\n  /* getAllChatUser(value){\n    this.allChatUser=this.allChatUser.push(value);\n  } */\n\n  async showPop(groupName,groupFriends) {\n    const alert = await this.alertCtrl.create({\n      cssClass: 'my-custom-class',\n      header: '' + groupName,\n      message: '' + groupFriends\n      \n    });\n\n    await alert.present();\n\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n    });\n\n    this.platform.backButton.subscribeWithPriority(10, (processNextHandler) => {\n      console.log('Back press handler!');\n      if (this._location.isCurrentPathEqualTo('/en-all-rooms')) {\n\n        // Show Exit Alert!\n        console.log('Show Exit Alert!');\n        this.showExitConfirm();\n        processNextHandler();\n      } else {\n\n        // Navigate to back page\n        console.log('Navigate to back page');\n        this._location.back();\n\n      }\n\n    });\n\n    this.platform.backButton.subscribeWithPriority(5, () => {\n      console.log('Handler called to force close!');\n      this.alertCtrl.getTop().then(r => {\n        if (r) {\n          navigator['app'].exitApp();\n        }\n      }).catch(e => {\n        console.log(e);\n      })\n    });\n\n  }\n\n\n  showExitConfirm() {\n    this.alertCtrl.create({\n      header: 'Close App',\n      message: 'Do you want to close the app?',\n      backdropDismiss: false,\n      buttons: [{\n        text: 'Stay',\n        role: 'cancel',\n        handler: () => {\n          console.log('Application exit prevented!');\n        }\n      }, {\n        text: 'Exit',\n        handler: () => {\n          navigator['app'].exitApp();\n        }\n      }]\n    })\n      .then(alert => {\n        alert.present();\n      });\n  }\n\n\n}\n\n\nimport { Pipe, PipeTransform } from '@angular/core';  \nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser'; \nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { first, map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { NativeAudio } from '@ionic-native/native-audio';\n@Pipe({  \n  name: 'starPipe'  \n})  \n  \nexport class StarPipe implements PipeTransform {  \n  constructor(private _sanitizer: DomSanitizer) { }  \n  \n  transform(value: any, event?: number): SafeHtml { \n    if(value) {    \n      if(value.group) {\n        return value.title;\n      }\n      else {\n        var arr = [];\n        if (value.visible_name) {\n          var filteredArray = value.visible_name.filter(function(itm){\n            return itm.uid == event;\n          });\n\n          if(filteredArray.length) {\n            return filteredArray[0].name;\n          } \n        }\n        \n        \n      }\n    }\n    return null;\n \n  }  \n} \n\n@Pipe({  \n  name: 'notificationPipe'  \n})  \n  \nexport class NotificationPipe implements PipeTransform {  \n  constructor(private _sanitizer: DomSanitizer) { }  \n  \n  transform(value: any, event?: number, group?: any): SafeHtml { \n    if(value) { \n       \n      if(group) {\n        var filteredArray = value.filter(function(itm){\n          return itm.uid == event;\n        });\n        \n        if(filteredArray.length) {\n          return filteredArray[0].unread > 0 ? filteredArray[0].unread : null;\n        }\n      }\n      else {\n        var arr = [];\n        var filteredArray = value.filter(function(itm){\n          return itm.uid != event;\n        });\n        if(filteredArray.length) {\n          return filteredArray[0].unread > 0 ? filteredArray[0].unread : null;\n        }\n      }\n    }\n    return null;\n \n  }  \n} \n","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar >\\n    \\n    <ion-title>All Chats</ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <!-- <ion-button routerLink=\\\"/en-create-room\\\"> -->\\n      <ion-button routerLink=\\\"/en-new-individual-chat\\\">\\n        <ion-icon name=\\\"create-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button (click)=\\\"signOut()\\\">\\n        <ion-icon name=\\\"log-out\\\" slot=\\\"icon-only\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    <ion-searchbar  showcancelbutton=\\\"\\\"\\n    (ionInput)=\\\"filterList($event)\\\"\\n    ></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n\\n  <ion-list *ngIf=\\\"_allRoom\\\"> \\n    <!-- <ion-item-sliding *ngFor=\\\"let group of groupsListBackup\\\">\\n      <ion-item button detail='false' [routerLink]=\\\"['/', 'en-chat',group.id]\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <img src=\\\"assets/avatar.svg\\\">\\n        </ion-avatar>\\n        <ion-label>\\n          <h3>{{group.title }}</h3>          \\n          <p>{{ group.last_text }}</p>\\n        </ion-label>\\n        \\n      </ion-item>\\n    </ion-item-sliding> -->\\n\\n   <!--  <ion-item button detail='false' *ngFor=\\\"let room of _allRoom  | async\\\" [routerLink]=\\\"['/', 'single-user-chat', (room | async)?.id || 0]\\\">\\n      <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"assets/avatar.svg\\\">\\n      </ion-avatar>\\n\\n      <ion-label>\\n        <h3>{{ room| async | starPipe: _authUsr.id }}</h3>          \\n        <p>{{ (room | async)?.last_message || null }}</p>\\n      </ion-label>\\n      \\n    </ion-item>\\n -->\\n\\n<ion-item button detail='false' *ngFor=\\\"let room of _filteredRoom\\\"\\n  [routerLink]=\\\"['/', 'single-user-chat', room.id]\\\">\\n  <ion-avatar slot=\\\"start\\\">\\n    <img src=\\\"assets/avatar.svg\\\">\\n  </ion-avatar>\\n\\n  <ion-badge color=\\\"primary\\\" slot=\\\"end\\\">{{ room.visible_name  |notificationPipe: _authUsr.id: room.group }}</ion-badge>\\n\\n  <ion-label>\\n    <h3>{{ room  |starPipe: _authUsr.id }}</h3>\\n    <p>{{ room.last_message}}</p>\\n  </ion-label>\\n</ion-item>\\n\\n\\n  </ion-list>\\n  \\n\\n</ion-content>\\n\\n\";"]}