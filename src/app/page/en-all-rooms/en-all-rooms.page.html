<ion-header [translucent]="true">
  <ion-toolbar >
    
    <ion-title>All Chats</ion-title>
    <ion-buttons slot="primary">
      <!-- <ion-button routerLink="/en-create-room"> -->
      <ion-button routerLink="/en-new-individual-chat">
        <ion-icon name="create-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="primary">
      <ion-button (click)="signOut()">
        <ion-icon name="log-out" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar>
    <ion-searchbar  showcancelbutton=""
    (ionInput)="filterList($event)"
    ></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>


  <ion-list *ngIf="_allRoom"> 
    <!-- <ion-item-sliding *ngFor="let group of groupsListBackup">
      <ion-item button detail='false' [routerLink]="['/', 'en-chat',group.id]">
        <ion-avatar slot="start">
          <img src="assets/avatar.svg">
        </ion-avatar>
        <ion-label>
          <h3>{{group.title }}</h3>          
          <p>{{ group.last_text }}</p>
        </ion-label>
        
      </ion-item>
    </ion-item-sliding> -->

   <!--  <ion-item button detail='false' *ngFor="let room of _allRoom  | async" [routerLink]="['/', 'single-user-chat', (room | async)?.id || 0]">
      <ion-avatar slot="start">
        <img src="assets/avatar.svg">
      </ion-avatar>

      <ion-label>
        <h3>{{ room| async | starPipe: _authUsr.id }}</h3>          
        <p>{{ (room | async)?.last_message || null }}</p>
      </ion-label>
      
    </ion-item>
 -->

<ion-item button detail='false' *ngFor="let room of _filteredRoom"
  [routerLink]="['/', 'single-user-chat', room.id]">
  <ion-avatar slot="start">
    <img src="assets/avatar.svg">
  </ion-avatar>

  <ion-badge color="primary" slot="end">{{ room.visible_name  |notificationPipe: _authUsr.id: room.group }}</ion-badge>

  <ion-label>
    <h3>{{ room  |starPipe: _authUsr.id }}</h3>
    <p>{{ room.last_message}}</p>
  </ion-label>
</ion-item>


  </ion-list>
  

</ion-content>

