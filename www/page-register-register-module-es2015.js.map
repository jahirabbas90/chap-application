{"version":3,"sources":["./src/app/page/register/register.page.ts","./src/app/page/register/register.page.html","./src/app/page/register/register-routing.module.ts","./src/app/page/register/register.page.scss","./src/app/page/register/register.module.ts"],"names":[],"mappings":"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","file":"page-register-register-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { EnDataService } from '../../services/en-data.service';\nimport { forkJoin } from 'rxjs';\n\nimport { MyConnecterService } from '../../services/my-connecter.service';\nimport { DatePipe } from '@angular/common';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage implements OnInit {\n\n  credentialForm: FormGroup;\n  submitted: boolean = false;\n  company: string;\n  btnHide: boolean = false;\n  constructor(\n    private fb: FormBuilder,\n    private actRoute: ActivatedRoute,\n    private router: Router,\n    private alertController: AlertController,\n    private loadingController: LoadingController,\n    private chatService: EnDataService,\n\n    private _connecter: MyConnecterService,\n    public datepipe: DatePipe\n  ) {\n    this.actRoute.paramMap.subscribe(params => {\n      this.company = params.get('company')\n    });\n  }\n \n  ngOnInit() {\n    // this.credentialForm = this.fb.group({\n    //   email: ['ankit@webmaddy.com', [Validators.required, Validators.email]],\n    //   password: ['123456', [Validators.required, Validators.minLength(6)]],\n    //   uid: ['4']\n    // });\n\n    this.credentialForm = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]],\n      nickname: ['', [Validators.required, Validators.minLength(2)]],\n      company: [this.company]\n    });\n    \n  }\n   \n  async signUp() {\n    // console.log(this.credentialForm.value)\n    // return;\n    if(this.credentialForm.invalid) {\n      return;\n    }\n\n    let obs = this.chatService.findUser(this.credentialForm.value.email);\n    let exsist = 0;\n    forkJoin(obs).subscribe(res => {\n      for (let data of res) {\n        if (data.length > 0) {\n          \n          alert('Email already exsist')\n\n          exsist = 1;\n        }\n      }\n      if(exsist == 0){\n        this.btnHide = true;        \n        this.chatService\n        .signup(this.credentialForm.value)\n        .then(\n          \n          async (user) => {\n            this.btnHide = false;\n            //this.router.navigateByUrl('/chat', { replaceUrl: true });\n            const alert = await this.alertController.create({\n              header: 'Sign up success',\n              message: 'User created ',\n              buttons: ['OK'],\n            });\n  \n            await alert.present();\n\n          },\n          async (err) => {\n            this.btnHide = false;\n            const alert = await this.alertController.create({\n              header: 'Sign up failed',\n              message: err.message,\n              buttons: ['OK'],\n            });\n  \n            await alert.present();\n          }\n        );\n\n      }\n      \n    });\n    \n  }\n\n  get email() {\n    return this.credentialForm.get('email');\n  }\n  \n  get password() {\n    return this.credentialForm.get('password');\n  }\n\n  get nickname() {\n    return this.credentialForm.get('nickname');\n  }\n\n  createdUser() {\n    if(!this.credentialForm.valid) {\n      this._connecter.presentToast('Invalid form value')\n      return;\n    }\n\n    let time = new Date();\n    var _id = time.getTime()+Math.floor(Math.random());\n\n    var ar = {\n      name: this.credentialForm.value.nickname,\n      email:  this.credentialForm.value.email,\n      password: this.credentialForm.value.password,\n      personal_chats: [\n        {\n          chat_id: null,\n          uid: _id\n        }\n      ],\n      uid: _id\n    };\n    // console.log(ar)\n    this._connecter.createNewUser(ar, this.credentialForm.value.email);\n    \n  }\n\n}\n","export default \"<ion-header [translucent]=\\\"true\\\" class=\\\"ion-no-border\\\">\\n  <ion-toolbar color=\\\"primary\\\">\\n    <!-- <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button auto-hide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons> -->\\n    <ion-title>\\n      Sign Up\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <div class=\\\"auth-box\\\">\\n    <div class=\\\"title-header\\\">\\n      <img src=\\\"assets/avatar.svg\\\" alt=\\\"\\\">\\n    </div>\\n\\n    <form [formGroup]=\\\"credentialForm\\\" >\\n\\n      <ion-item class=\\\"form-control ion-no-padding\\\">\\n        <ion-label position=\\\"floating\\\">Email</ion-label>\\n        <ion-input\\n          placeholder=\\\"Email address\\\"\\n          formControlName=\\\"email\\\"\\n          autofocus=\\\"true\\\"\\n          clearInput=\\\"true\\\"\\n        ></ion-input>\\n      </ion-item>\\n      <div *ngIf=\\\"(email.dirty || email.touched) && email.errors\\\" class=\\\"errors\\\">\\n        <span *ngIf=\\\"email.errors?.required\\\">Email is required</span>\\n        <span *ngIf=\\\"email.errors?.email\\\">Email is invalid</span>\\n      </div>\\n      \\n      <ion-item class=\\\"form-control ion-no-padding\\\">\\n        <ion-label position=\\\"floating\\\">Password</ion-label>\\n        <ion-input\\n          placeholder=\\\"Password\\\"\\n          type=\\\"password\\\"\\n          formControlName=\\\"password\\\"\\n          clearInput=\\\"true\\\"\\n        ></ion-input>\\n      </ion-item>\\n      <div *ngIf=\\\"(password.dirty || password.touched) && password.errors\\\" class=\\\"errors\\\">\\n        <span *ngIf=\\\"password.errors?.required\\\">Password is required</span>\\n        <span *ngIf=\\\"password.errors?.minlength\\\">Password needs to be 6 characters</span>\\n      </div>\\n\\n      <ion-item class=\\\"form-control ion-no-padding\\\">\\n        <ion-label position=\\\"floating\\\">Nickname</ion-label>\\n        <ion-input\\n          placeholder=\\\"Nickname\\\"\\n          type=\\\"text\\\"\\n          formControlName=\\\"nickname\\\"\\n          clearInput=\\\"true\\\"\\n        ></ion-input>\\n      </ion-item>\\n      <div *ngIf=\\\"(nickname.dirty || nickname.touched) && nickname.errors\\\" class=\\\"errors\\\">\\n        <span *ngIf=\\\"nickname.errors?.required\\\">Nickname is required</span>\\n        <span *ngIf=\\\"nickname.errors?.minlength\\\">Nickname needs to be 2 characters</span>\\n      </div>\\n\\n      <ion-button fill=\\\"clear\\\" expand=\\\"block\\\" class=\\\"btn-link-light mb15 mt30\\\" [routerLink]=\\\"['/en-login']\\\">Login</ion-button>\\n\\n      <ion-button expand=\\\"block\\\" color=\\\"primary\\\" class=\\\"mb15\\\" mode=\\\"md\\\" (click)=\\\"createdUser()\\\" *ngIf=\\\"!btnHide\\\">Sign Up</ion-button>\\n      <p *ngIf=\\\"btnHide\\\">Please wait...</p>\\n\\n    </form>\\n  </div>\\n\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","export default \".errors {\\n  font-size: small;\\n  color: #c04848;\\n  padding-left: 15px;\\n  padding-top: 5px;\\n  padding-bottom: 5px;\\n}\\n\\n.auth-box {\\n  padding: 2em;\\n}\\n\\n.auth-box .title-header {\\n  padding: 2em 0;\\n  text-align: center;\\n}\\n\\n.item-native {\\n  -webkit-padding-start: initial;\\n          padding-inline-start: initial;\\n}\\n\\n.mb15 {\\n  margin-bottom: 15px;\\n}\\n\\n.mt30 {\\n  margin-top: 30px;\\n}\\n\\n.mb30 {\\n  margin-bottom: 30px;\\n}\\n\\nion-input {\\n  --padding-end: 0px;\\n}\\n\\n.input-note {\\n  color: red;\\n  font-size: 0.8em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFxyZWdpc3Rlci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7QUFDRjs7QUFBRTtFQUNJLGNBQUE7RUFDQSxrQkFBQTtBQUVOOztBQUNBO0VBQ0UsOEJBQUE7VUFBQSw2QkFBQTtBQUVGOztBQUFBO0VBQ0UsbUJBQUE7QUFHRjs7QUFEQTtFQUNFLGdCQUFBO0FBSUY7O0FBRkE7RUFDRSxtQkFBQTtBQUtGOztBQUhBO0VBQ0Usa0JBQUE7QUFNRjs7QUFKQTtFQUNFLFVBQUE7RUFDQSxnQkFBQTtBQU9GIiwiZmlsZSI6InJlZ2lzdGVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvcnMge1xyXG4gIGZvbnQtc2l6ZTogc21hbGw7XHJcbiAgY29sb3I6IHJnYigxOTIsIDcyLCA3Mik7XHJcbiAgcGFkZGluZy1sZWZ0OiAxNXB4O1xyXG4gIHBhZGRpbmctdG9wOiA1cHg7XHJcbiAgcGFkZGluZy1ib3R0b206IDVweDtcclxufVxyXG5cclxuLmF1dGgtYm94e1xyXG4gIHBhZGRpbmc6IDJlbTtcclxuICAudGl0bGUtaGVhZGVye1xyXG4gICAgICBwYWRkaW5nOiAyZW0gMDtcclxuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIH1cclxufVxyXG4uaXRlbS1uYXRpdmV7XHJcbiAgcGFkZGluZy1pbmxpbmUtc3RhcnQ6IGluaXRpYWw7XHJcbn1cclxuLm1iMTV7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxufVxyXG4ubXQzMHtcclxuICBtYXJnaW4tdG9wOiAzMHB4O1xyXG59XHJcbi5tYjMwe1xyXG4gIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbn1cclxuaW9uLWlucHV0IHtcclxuICAtLXBhZGRpbmctZW5kOiAwcHg7XHJcbn1cclxuLmlucHV0LW5vdGUge1xyXG4gIGNvbG9yOiByZWQ7XHJcbiAgZm9udC1zaXplOiAwLjhlbTtcclxufSJdfQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RegisterPageRoutingModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n"],"sourceRoot":"webpack:///"}